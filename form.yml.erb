---
cluster:
  - "casper"
form:
  - resource
  - custom_queue
  - bc_account
  - num_nodes
  - bc_num_slots
  - threads
  - mpiprocs
  - memory
  - num_gpus
  - gpu_type
  - bc_num_hours
  - jupyter_env
  - bc_email_on_started
attributes:
  resource:
    label: 'Resource Selection'
    widget: 'select'
    options:
      - [ 'Casper login', 'jhublogin',
	data-hide-custom-queue: true,
	data-set-custom-queue: 'jhublogin',
	data-hide-num-nodes: true,
	data-set-num-nodes: 1,
	data-hide-bc-num-slots: true,
	data-set-bc-num-slots: 2,
	data-hide-threads: true,
	data-set-threads: 1,
	data-hide-mpiprocs: true,
	data-set-mpi-procs: 1,
	data-hide-memory: true,
	data-set-memory: 10,
        data-hide-enable-gpus: true,
        data-set-enable-gpus: 0,
	data-hide-num-gpus: true,
	data-set-num-gpus: 0,
	data-hide-gpu-type: true,
	data-hide-bc-num-hours: true,
	data-set-bc-num-hours: 720,
	data-hide-jupyter-env: true,
	data-set-jupyter-env: 'base' ]
      - [ 'Casper PBS batch', 'casper_batch',
        data-set-custom-queue: 'casper',
        data-set-bc-num-hours: 1 ]
  custom_queue:
    widget: 'select'
    label: "Queue or Reservation (-q)"
    options:
      <%- CustomQueues.queues.each do |queue| %>
      - "<%= queue.strip %>"
    <%- end %>
  bc_account:
    label: "Project Account (-A)"
    widget: 'select'
    help: "Select the account to charge for this job."
    options:
      <%- CustomAccounts.accounts.each do |account| %>
      - "<%= account.strip %>"
    <%- end %>
  num_nodes:
    label: "Specify N Nodes (-l select=N)"
    widget: 'number_field'
    placeholder: "Recommended: 1"
    min: 1
    max: 4
    value: 1 # Default
  bc_num_slots:
    widget: "number_field"
    label: "Specify N CPUs per Node (-l ncpus=N)"
    min: 1
    max: 72
    value: 1 # Default
  threads:
    label: "Specify Threads per Process (-l ompthreads=N)"
    widget: "number_field"
    min: 1
    max: 2
    value: 1 # Default
  mpiprocs:
    label: "Specify MPI processes per Node (-l mpiprocs=N)"
    widget: "number_field"
    min: 1
    max: 72
    value: 1 # Default
  memory:
    label: "Specify Memory per Node in GB (-l mem=N)"
    widget: "number_field"
    min: 1
    max: 1494
    value: 4 # Default
  num_gpus:
    label: "Specify X Number of GPUs / Node (-l ngpus=X)"
    widget: 'number_field'
    min: 0
    max: 8
    value: 0 # Default
  gpu_type:
    label: "Select GPU Type, X (-l gpu_type=X)"
    widget: 'select'
    options:
      - ["NVIDIA Compute Capability 7.0", "cc70"]
      - ["NVIDIA Compute Capability 8.0", "cc80"]
      - ["NVIDIA Compute Capability 9.0", "cc90"]
      - ["Any NVIDIA GPGPU", "nvgpu"]
      - ["NVIDIA V100 SXM 4-way", "v100_4way"]
      - ["NVIDIA V100 SXM 8-way", "v100_8way"]
      - ["NVIDIA A100 PCIe 1-way", "a100_1way"]
      - ["NVIDIA A100 SXM 4-way", "a100_4way"]
      - ["NVIDIA A100 80GB 4-way", "a100_80gb"]
      - ["NVIDIA H100 SXM 4-way", "h100_4way"]
      - ["NVIDIA H100 80GB", "h100_80gb"]
      - ["Any AMD GPGPU", "amdgpu"]
      - ["AMD MI300a", "mi300a"]
      - ["Visualization - ANY Vis GPU", "vis"]
      - ["Visualization - NVIDIA GP100", "gp100"]
      - ["Visualization - NVIDIA L40", "l40"]
      - ["AI Inference - NVIDIA L40", "l40"]
  bc_num_hours:
    label: "Wall Time in hours (24-hour max)"
    widget: 'number_field'
    min: 1
    max: 24
    value: 1 # Default
  jupyter_env:
    label: "Jupyter Environment"
    widget: 'select'
    options:
      - "Base"
      - "Vapor2"
      - "VAPOR-3.10"
